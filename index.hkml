<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOEIC Quest: æŒ‘æˆ° 800 åˆ†ä¿±æ¨‚éƒ¨</title>
    <style>
        :root {
            --primary: #4f46e5; /* å†’éšªè— */
            --secondary: #fbbf24; /* é‡‘å¹£é»ƒ */
            --success: #10b981;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f3f4f6;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: var(--light);
            color: var(--dark);
        }

        /* Header / Dashboard */
        header {
            background: var(--dark);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .logo { font-size: 1.5rem; font-weight: bold; }
        .stats { display: flex; gap: 20px; font-size: 1.1rem; }
        .stat-box span { font-weight: bold; color: var(--secondary); }

        /* Main Layout */
        main {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        /* Theme Selector */
        .themes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .theme-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            border: 2px solid transparent;
        }

        .theme-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-color: var(--primary);
        }

        .theme-icon { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .theme-title { font-weight: bold; margin-bottom: 0.5rem; }
        .theme-desc { font-size: 0.85rem; color: #666; }

        /* Game Area */
        #game-area {
            display: none; /* Hidden initially */
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-card h3 {
            margin-top: 0;
            color: var(--primary);
        }

        .question-text {
            font-size: 1.25rem;
            margin: 1.5rem 0;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .option-btn:hover { background-color: #f9fafb; border-color: var(--primary); }
        
        .option-btn.correct {
            background-color: #d1fae5;
            border-color: var(--success);
            color: #065f46;
        }

        .option-btn.wrong {
            background-color: #fee2e2;
            border-color: var(--danger);
            color: #991b1b;
        }

        .feedback {
            margin-top: 1.5rem;
            padding: 1rem;
            background: #eff6ff;
            border-left: 4px solid var(--primary);
            border-radius: 4px;
            display: none;
        }

        .next-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 1rem;
            font-weight: bold;
            display: none;
            float: right;
        }

        .back-btn {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            background-color: #e5e7eb;
            border-radius: 99px;
            height: 10px;
            margin-bottom: 2rem;
        }
        .progress-bar {
            height: 100%;
            background-color: var(--success);
            border-radius: 99px;
            width: 0%;
            transition: width 0.3s ease;
        }

    </style>
</head>
<body>

<header>
    <div class="logo">ğŸš€ TOEIC Quest</div>
    <div class="stats">
        <div class="stat-box">XP: <span id="xp-display">0</span></div>
        <div class="stat-box">Level: <span id="level-display">1</span></div>
    </div>
</header>

<main>
    <section id="theme-selection">
        <h2>é¸æ“‡ä½ çš„æŒ‘æˆ°ä¸»é¡Œ</h2>
        <p>æŒæ¡ä¸åŒæƒ…å¢ƒçš„é—œéµå­—å½™ï¼Œé‚å‘ 800 åˆ†ï¼</p>
        <div class="themes">
            <div class="theme-card" onclick="startGame('business')">
                <div class="theme-icon">ğŸ’¼</div>
                <div class="theme-title">å•†å‹™æœƒè­°</div>
                <div class="theme-desc">æœƒè­°è¨˜éŒ„ã€ææ¡ˆã€è«‡åˆ¤ç”¨èª</div>
            </div>
            <div class="theme-card" onclick="startGame('travel')">
                <div class="theme-icon">âœˆï¸</div>
                <div class="theme-title">å•†å‹™å·®æ—…</div>
                <div class="theme-desc">æ©Ÿå ´ã€é£¯åº—é è¨‚ã€è¡Œç¨‹å®‰æ’</div>
            </div>
            <div class="theme-card" onclick="startGame('office')">
                <div class="theme-icon">ğŸ–¨ï¸</div>
                <div class="theme-title">è¾¦å…¬å®¤æºé€š</div>
                <div class="theme-desc">Email å¯«ä½œã€åŒäº‹å°è©±ã€å…¬å‘Š</div>
            </div>
        </div>
    </section>

    <section id="game-area">
        <button class="back-btn" onclick="goBack()">â† å›åˆ°å¤§å»³</button>
        
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <div class="question-card">
            <h3 id="category-tag">General Business</h3>
            <div class="question-text" id="question-text">
                Loading question...
            </div>
            <div class="options" id="options-container">
                </div>
        </div>

        <div class="feedback" id="feedback-area">
            <strong>è§£æï¼š</strong> <span id="explanation-text"></span>
        </div>

        <button class="next-btn" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ Challenge â†’</button>
    </section>
</main>

<script>
    // æ¨¡æ“¬è³‡æ–™åº«ï¼šTOEIC 800+ é›£åº¦é¡Œç›®
    const questionBank = {
        business: [
            {
                q: "The merger cannot proceed ______ all the shareholders have signed the agreement.",
                options: ["unless", "despite", "without", "however"],
                correct: 0,
                explanation: "é€™è£¡éœ€è¦ä¸€å€‹é€£æ¥è©ä¾†é€£æ¥å…©å€‹å­å¥ã€‚'Unless' (é™¤é) æ˜¯æœ€åˆé©çš„é‚è¼¯é—œä¿‚ã€‚'Without' æ˜¯ä»‹ä¿‚è©ï¼Œä¸èƒ½ç›´æ¥æ¥å­å¥ã€‚"
            },
            {
                q: "Ms. Lee was ______ to learn that her proposal had been accepted by the board.",
                options: ["delight", "delighting", "delighted", "delightful"],
                correct: 2,
                explanation: "äººæ„Ÿåˆ°é«˜èˆˆç”¨éå»åˆ†è© (V-ed)ã€‚'Delighted' æ„ç‚ºæ„Ÿåˆ°é«˜èˆˆçš„ã€‚'Delightful' æ˜¯ç”¨ä¾†å½¢å®¹äº‹ç‰©ä»¤äººæ„‰å¿«çš„ã€‚"
            }
        ],
        travel: [
            {
                q: "Passengers are reminded to ______ their belongings before leaving the aircraft.",
                options: ["inspect", "secure", "check", "assure"],
                correct: 2,
                explanation: "æª¢æŸ¥éš¨èº«ç‰©å“æœ€å¸¸ç”¨çš„æ­é…è©æ˜¯ 'check personal belongings'ã€‚'Inspect' é€šå¸¸æŒ‡æ­£å¼çš„è¦–å¯Ÿã€‚"
            },
            {
                q: "Due to the storm, the flight has been ______ indefinitely.",
                options: ["canceled", "delayed", "expired", "terminated"],
                correct: 1,
                explanation: "èªæ„é‚è¼¯ï¼š'indefinitely' (ç„¡é™æœŸåœ°) é€šå¸¸æ­é… 'delayed' (å»¶èª¤)ã€‚è‹¥æ˜¯ 'canceled' å‰‡èˆªç­ç›´æ¥å–æ¶ˆï¼Œä¸æœƒèªªç„¡é™æœŸã€‚"
            }
        ],
        office: [
            {
                q: "Please ______ the attached document for the meeting agenda.",
                options: ["refer", "look", "consult", "review"],
                correct: 3,
                explanation: "è«‹å¯©é–±é™„ä»¶æ–‡ä»¶ï¼Œç”¨ 'review' æœ€ç‚ºæ°ç•¶ã€‚'Refer' é€šå¸¸éœ€æ­é… 'to' (refer to)ã€‚"
            }
        ]
    };

    let currentTheme = '';
    let currentQuestionIndex = 0;
    let xp = 0;
    let level = 1;

    // å•Ÿå‹•éŠæˆ²
    function startGame(theme) {
        currentTheme = theme;
        currentQuestionIndex = 0;
        
        // UI åˆ‡æ›
        document.getElementById('theme-selection').style.display = 'none';
        document.getElementById('game-area').style.display = 'block';
        
        loadQuestion();
    }

    // è¼‰å…¥é¡Œç›®
    function loadQuestion() {
        const questions = questionBank[currentTheme];
        
        if (currentQuestionIndex >= questions.length) {
            alert(`ğŸ‰ æ­å–œï¼ä½ å®Œæˆäº† ${currentTheme} ä¸»é¡Œçš„æŒ‘æˆ°ï¼ç²å¾— XP: ${xp}`);
            goBack();
            return;
        }

        const qData = questions[currentQuestionIndex];
        
        // æ›´æ–°é€²åº¦æ¢
        const progress = (currentQuestionIndex / questions.length) * 100;
        document.getElementById('progress-bar').style.width = `${progress}%`;

        document.getElementById('category-tag').innerText = currentTheme.toUpperCase() + ' - Q' + (currentQuestionIndex + 1);
        document.getElementById('question-text').innerText = qData.q;
        
        // é‡ç½® UI
        const optsContainer = document.getElementById('options-container');
        optsContainer.innerHTML = '';
        document.getElementById('feedback-area').style.display = 'none';
        document.getElementById('next-btn').style.display = 'none';

        // ç”¢ç”Ÿé¸é …æŒ‰éˆ•
        qData.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(index, qData.correct, btn);
            optsContainer.appendChild(btn);
        });
    }

    // æª¢æŸ¥ç­”æ¡ˆ
    function checkAnswer(selectedIndex, correctIndex, btnElement) {
        // é˜²æ­¢é‡è¤‡é»æ“Š
        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(btn => btn.disabled = true);

        const qData = questionBank[currentTheme][currentQuestionIndex];
        const isCorrect = selectedIndex === correctIndex;

        if (isCorrect) {
            btnElement.classList.add('correct');
            btnElement.innerHTML += ' âœ…';
            gainXP(50); // ç­”å°åŠ åˆ†
        } else {
            btnElement.classList.add('wrong');
            btnElement.innerHTML += ' âŒ';
            // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
            allBtns[correctIndex].classList.add('correct');
        }

        // é¡¯ç¤ºè§£æèˆ‡ä¸‹ä¸€é¡ŒæŒ‰éˆ•
        const feedback = document.getElementById('feedback-area');
        document.getElementById('explanation-text').innerText = qData.explanation;
        feedback.style.display = 'block';
        document.getElementById('next-btn').style.display = 'block';
    }

    // ç¶“é©—å€¼ç³»çµ±
    function gainXP(amount) {
        xp += amount;
        document.getElementById('xp-display').innerText = xp;
        
        // ç°¡å–®çš„å‡ç´šé‚è¼¯
        if (xp >= level * 100) {
            level++;
            document.getElementById('level-display').innerText = level;
            // é€™è£¡å¯ä»¥åŠ å…¥å‡ç´šå‹•ç•«æ•ˆæœ
        }
    }

    function nextQuestion() {
        currentQuestionIndex++;
        loadQuestion();
    }

    function goBack() {
        document.getElementById('game-area').style.display = 'none';
        document.getElementById('theme-selection').style.display = 'grid';
    }
</script>

</body>
</html>